<launch>
  <arg name="with_vehicle" default="true" />
  <arg name="with_rviz" default="true" />
  <rosparam file="$(find dcas_perception_sim)/config/config.yaml" command="load" />

  <!-- Environment ground-truth publishers -->
  <node pkg="dcas_perception_sim" type="env_lane_node.py" name="env_lane_node" output="screen" />
  <node pkg="dcas_perception_sim" type="env_traffic_light_node.py" name="env_traffic_light_node" output="screen" />
  <node pkg="dcas_perception_sim" type="env_guardrail_node.py" name="env_guardrail_node" output="screen" />
  <node pkg="dcas_perception_sim" type="env_building_node.py" name="env_building_node" output="screen" />
  <node pkg="dcas_perception_sim" type="env_sign_node.py" name="env_sign_node" output="screen" />
  <node pkg="dcas_perception_sim" type="env_surrounding_vehicle_node.py" name="env_surrounding_vehicle_node" output="screen" />

  <!-- Sensors -->
  <node pkg="dcas_perception_sim" type="sensor_motion_node.py" name="sensor_motion_node" output="screen" />
  <node pkg="dcas_perception_sim" type="sensor_gnss_node.py" name="sensor_gnss_node" output="screen" />
  <node pkg="dcas_perception_sim" type="sensor_imu_node.py" name="sensor_imu_node" output="screen" />
  <node pkg="dcas_perception_sim" type="sensor_lidar_node.py" name="sensor_lidar_node" output="screen" />
  <node pkg="dcas_perception_sim" type="sensor_radar_node.py" name="sensor_radar_node" output="screen" />
  <node pkg="dcas_perception_sim" type="sensor_camera_node.py" name="sensor_camera_node" output="screen" />

  <!-- Vehicle (optional) -->
  <group if="$(arg with_vehicle)">
    <node pkg="dcas_perception_sim" type="vehicle_kinematic_node.py" name="vehicle_kinematic_node" output="screen" />
    <node pkg="dcas_perception_sim" type="teleop_keyboard_node.py" name="teleop_keyboard_node" output="screen" />
    <node pkg="dcas_perception_sim" type="tf_sensor_frames_node.py" name="tf_sensor_frames_node" output="screen" />
  </group>

  <!-- Rviz (optional) -->
  <group if="$(arg with_rviz)">
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find dcas_perception_sim)/rviz/dcas_perception.rviz" />
  </group>

</launch>


